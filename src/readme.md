USE pay_master_db;

-- TABLE WORKER
CREATE TABLE WORKER (
ID_WORKER INT AUTO_INCREMENT PRIMARY KEY,
FIRST_NAME_WORKER VARCHAR(50) NOT NULL,
LAST_NAME_WORKER VARCHAR(50) NOT NULL,
STATUS_WORKER CHAR(1) NOT NULL,
DNI_WORKER VARCHAR(8),
ADDRESS_WORKER VARCHAR(100),
DATE_BIRTH_WORKER DATE,
GENDER_WORKER CHAR(1),
CONTACT_NUMBER_WORKER VARCHAR(15),
EMAIL_WORKER VARCHAR(50),
CONTRACT_DATE_WORKER DATE,
ID_DEPARTMENT INT,
REGISTRATION_DAY DATE,
CREATED_BY VARCHAR(15),
MODIFICATION_DAY DATE,
MODIFIED_BY VARCHAR(15),
DELETED_DAY DATE,
DELETED_BY VARCHAR(15),
CONSTRAINT FK_DEPARTMENT
FOREIGN KEY (ID_DEPARTMENT)
REFERENCES DEPARTMENT(ID_DEPARTMENT)
);

-- TABLE DEPARTMENT
CREATE TABLE DEPARTMENT (
ID_DEPARTMENT INT AUTO_INCREMENT PRIMARY KEY,
NAME_DEPARTMENT VARCHAR(50) NOT NULL,
DESCRIPTION_DEPARTMENT TEXT,
REGISTRATION_DAY DATE,
CREATED_BY VARCHAR(15),
MODIFICATION_DAY DATE,
MODIFIED_BY VARCHAR(15),
DELETED_DAY DATE,
DELETED_BY VARCHAR(15)
);

-- TABLE LABOR CONTRACT
CREATE TABLE LABOR_CONTRACT (
ID_CONTRACT INT AUTO_INCREMENT PRIMARY KEY,
ID_WORKER INT,
TYPE_CONTRACT VARCHAR(50) NOT NULL,
SALARY_CONTRACT DECIMAL(10, 2) NOT NULL,
START_DATE_CONTRACT DATE NOT NULL,
END_DATE_CONTRACT DATE,
REGISTRATION_DAY DATE,
CREATED_BY VARCHAR(15),
MODIFICATION_DAY DATE,
MODIFIED_BY VARCHAR(15),
DELETED_DAY DATE,
DELETED_BY VARCHAR(15),
CONSTRAINT FK_WORKER_CONTRACT
FOREIGN KEY (ID_WORKER)
REFERENCES WORKER(ID_WORKER)
);

-- TABLE PAYMENT
CREATE TABLE PAYMENT (
ID_PAYMENT INT AUTO_INCREMENT PRIMARY KEY,
ID_CONTRACT INT,
DATE_PAYMENT DATE NOT NULL,
AMOUNT_PAYMENT DECIMAL(10, 2) NOT NULL,
DEDUCTIONS_PAYMENT DECIMAL(10, 2),
BONUSES_PAYMENT DECIMAL(10, 2),
REGISTRATION_DAY DATE,
CREATED_BY VARCHAR(15),
MODIFICATION_DAY DATE,
MODIFIED_BY VARCHAR(15),
DELETED_DAY DATE,
DELETED_BY VARCHAR(15),
CONSTRAINT FK_CONTRACT_PAYMENT
FOREIGN KEY (ID_CONTRACT)
REFERENCES LABOR_CONTRACT(ID_CONTRACT)
);

-- TABLE PAYMENT HISTORY
CREATE TABLE PAYMENT_HISTORY (
ID_PAYMENT_HISTORY INT AUTO_INCREMENT PRIMARY KEY,
ID_WORKER INT,
GENERATION_DATE DATE,
DESCRIPTION TEXT,
REGISTRATION_DAY DATE,
CREATED_BY VARCHAR(15),
MODIFICATION_DAY DATE,
MODIFIED_BY VARCHAR(15),
DELETED_DAY DATE,
DELETED_BY VARCHAR(15),
CONSTRAINT FK_WORKER_PAYMENT_HISTORY
FOREIGN KEY (ID_WORKER)
REFERENCES WORKER(ID_WORKER)
);

-- RELATION BETWEEN PAYMENT AND PAYMENT HISTORY (ASSOCIATION)
ALTER TABLE PAYMENT
ADD COLUMN ID_PAYMENT_HISTORY INT,
ADD CONSTRAINT FK_PAYMENT_HISTORY
FOREIGN KEY (ID_PAYMENT_HISTORY)
REFERENCES PAYMENT_HISTORY(ID_PAYMENT_HISTORY);

-- TABLE USER ROLE
CREATE TABLE USER_ROLE (
ID_USER_ROLE INT AUTO_INCREMENT PRIMARY KEY,
ID_WORKER INT,
ROLE_USER_ROLE VARCHAR(50) NOT NULL,
REGISTRATION_DAY DATE,
CREATED_BY VARCHAR(15),
MODIFICATION_DAY DATE,
MODIFIED_BY VARCHAR(15),
DELETED_DAY DATE,
DELETED_BY VARCHAR(15),
CONSTRAINT FK_WORKER_USER_ROLE
FOREIGN KEY (ID_WORKER)
REFERENCES WORKER(ID_WORKER)
);
